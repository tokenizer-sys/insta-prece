<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2299.77">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px 'Helvetica Neue'}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px 'Helvetica Neue'; min-height: 15.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="pt-br"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;InstaPrece - Sua Prece em Jerusalém&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">            </span>scroll-behavior: smooth;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.bg-jerusalem {</p>
<p class="p1"><span class="Apple-converted-space">            </span>/* Imagem do Muro das Lamentações */</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-image: url('https://images.unsplash.com/photo-1588439369941-c57d7b39b746?q=80&amp;w=2070&amp;auto=format&amp;fit=crop');</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-size: cover;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-position: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.backdrop-blur-sm {</p>
<p class="p1"><span class="Apple-converted-space">            </span>backdrop-filter: blur(4px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.pulse-once {</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: pulse-once 1.5s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes pulse-once {</p>
<p class="p1"><span class="Apple-converted-space">            </span>0% { transform: scale(1); }</p>
<p class="p1"><span class="Apple-converted-space">            </span>50% { transform: scale(1.05); }</p>
<p class="p1"><span class="Apple-converted-space">            </span>100% { transform: scale(1); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="bg-gray-900 text-white"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="min-h-screen bg-jerusalem flex flex-col items-center justify-center p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="main-content" class="w-full max-w-lg mx-auto bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-2xl shadow-2xl p-6 md:p-10 text-center transition-all duration-500"&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Estado Inicial: Boas-vindas e Gravação --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="record-view"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h1 class="text-4xl md:text-5xl font-bold text-amber-300"&gt;InstaPrece&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="mt-4 text-gray-200 text-lg"&gt;Sua voz, sua fé, na Terra Santa.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="mt-2 text-gray-300"&gt;Grave sua prece e nós a levaremos até os altos-falantes de Jerusalém. Deixe sua mensagem ecoar na cidade sagrada.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex flex-col items-center justify-center space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="record-button" class="bg-red-600 hover:bg-red-700 text-white rounded-full w-24 h-24 flex items-center justify-center shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-red-400"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i id="record-icon" class="fas fa-microphone text-4xl"&gt;&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p id="record-status" class="text-gray-300 h-6"&gt;Clique para gravar sua prece&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="timer" class="text-2xl font-mono text-amber-300 h-8"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Estado de Revisão --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="review-view" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-3xl font-bold text-amber-300 mb-4"&gt;Revise sua Prece&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-300 mb-6"&gt;Ouça a gravação antes de enviá-la para Jerusalém.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-700 rounded-lg p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;audio id="audio-playback" controls class="w-full"&gt;&lt;/audio&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mt-8 flex flex-col md:flex-row gap-4 justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="rerecord-button" class="w-full md:w-auto bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-redo mr-2"&gt;&lt;/i&gt;Gravar Novamente</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="send-button" class="w-full md:w-auto bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-3 px-6 rounded-lg transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-paper-plane mr-2"&gt;&lt;/i&gt;Enviar para Pagamento</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;div id="upload-status" class="mt-4 text-amber-300 h-6"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Estado de Pagamento --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="payment-view" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-3xl font-bold text-amber-300 mb-2"&gt;Quase lá!&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-300 mb-6"&gt;Realize o pagamento para que sua prece seja ouvida.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-700 rounded-lg p-6 text-left"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-center text-lg mb-4"&gt;Valor: &lt;strong&gt;R$ 19,90&lt;/strong&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;!-- Formulário de pagamento simulado --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label for="card-name" class="block text-sm font-medium text-gray-300"&gt;Nome no Cartão&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="card-name" class="w-full bg-gray-800 border border-gray-600 rounded-md p-2 mt-1 focus:ring-amber-500 focus:border-amber-500" placeholder="Seu Nome Completo"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label for="card-number" class="block text-sm font-medium text-gray-300"&gt;Número do Cartão&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="card-number" class="w-full bg-gray-800 border border-gray-600 rounded-md p-2 mt-1 focus:ring-amber-500 focus:border-amber-500" placeholder="0000 0000 0000 0000"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="flex gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="card-expiry" class="block text-sm font-medium text-gray-300"&gt;Validade&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="text" id="card-expiry" class="w-full bg-gray-800 border border-gray-600 rounded-md p-2 mt-1" placeholder="MM/AA"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="card-cvc" class="block text-sm font-medium text-gray-300"&gt;CVC&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="text" id="card-cvc" class="w-full bg-gray-800 border border-gray-600 rounded-md p-2 mt-1" placeholder="123"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="pay-button" class="mt-8 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition-colors text-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;i class="fas fa-lock mr-2"&gt;&lt;/i&gt;Pagar e Enviar Prece</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Estado de Agradecimento --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="thankyou-view" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;div class="text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="text-6xl text-green-400 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-check-circle"&gt;&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-3xl font-bold text-amber-300 mb-4"&gt;Obrigado!&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-200 text-lg"&gt;Sua prece foi recebida com sucesso.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-300 mt-2"&gt;Em breve, ela ecoará pelas ruas sagradas de Jerusalém. Agradecemos por sua fé e confiança.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="home-button" class="mt-8 bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-3 px-6 rounded-lg transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>Fazer Nova Prece</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Mensagem de erro de permissão --&gt;</p>
<p class="p1"><span class="Apple-converted-space">             </span>&lt;div id="permission-error-view" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="text-center text-red-400"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="text-6xl mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-microphone-slash"&gt;&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-3xl font-bold mb-4"&gt;Acesso ao Microfone Negado&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-200"&gt;Para gravar sua prece, precisamos da sua permissão para usar o microfone.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-300 mt-2"&gt;Por favor, habilite o acesso nas configurações do seu navegador e atualize a página.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;footer class="text-center text-white text-opacity-70 mt-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p&gt;&amp;copy; 2024 InstaPrece. Todos os direitos reservados.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/footer&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script type="module"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// ---------- PASSO 1: CONFIGURAÇÃO DO FIREBASE (Cole seu código aqui) ----------</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Descomente e cole a configuração do Firebase que você copiou do console.</p>
<p class="p1"><span class="Apple-converted-space">        </span>/*</p>
<p class="p1"><span class="Apple-converted-space">        </span>import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";</p>
<p class="p1"><span class="Apple-converted-space">        </span>import { getStorage, ref, uploadBytes } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const firebaseConfig = {</p>
<p class="p1"><span class="Apple-converted-space">            </span>apiKey: "SUA_API_KEY",</p>
<p class="p1"><span class="Apple-converted-space">            </span>authDomain: "SEU_AUTH_DOMAIN",</p>
<p class="p1"><span class="Apple-converted-space">            </span>projectId: "SEU_PROJECT_ID",</p>
<p class="p1"><span class="Apple-converted-space">            </span>storageBucket: "SEU_STORAGE_BUCKET",</p>
<p class="p1"><span class="Apple-converted-space">            </span>messagingSenderId: "SEU_SENDER_ID",</p>
<p class="p1"><span class="Apple-converted-space">            </span>appId: "SEU_APP_ID"</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const app = initializeApp(firebaseConfig);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const storage = getStorage(app);</p>
<p class="p1"><span class="Apple-converted-space">        </span>*/</p>
<p class="p2"><span class="Apple-converted-space">       </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- Elementos da UI ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>const recordView = document.getElementById('record-view');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const reviewView = document.getElementById('review-view');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const paymentView = document.getElementById('payment-view');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const thankyouView = document.getElementById('thankyou-view');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const permissionErrorView = document.getElementById('permission-error-view');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const mainContent = document.getElementById('main-content');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const recordButton = document.getElementById('record-button');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const recordIcon = document.getElementById('record-icon');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const recordStatus = document.getElementById('record-status');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const timerEl = document.getElementById('timer');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const audioPlayback = document.getElementById('audio-playback');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const rerecordButton = document.getElementById('rerecord-button');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sendButton = document.getElementById('send-button');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const uploadStatus = document.getElementById('upload-status');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const payButton = document.getElementById('pay-button');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const homeButton = document.getElementById('home-button');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- Variáveis de Estado ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>let mediaRecorder;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let audioChunks = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let audioBlob = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let isRecording = false;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let timerInterval;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- Funções de Navegação ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>function showView(view) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>recordView.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>reviewView.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>paymentView.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>thankyouView.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>permissionErrorView.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>view.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>mainContent.classList.add('pulse-once');</p>
<p class="p1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; mainContent.classList.remove('pulse-once'), 1500);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function resetToHome() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>stopRecording(); // Para garantir que tudo pare</p>
<p class="p1"><span class="Apple-converted-space">            </span>audioChunks = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>audioBlob = null;</p>
<p class="p1"><span class="Apple-converted-space">            </span>clearInterval(timerInterval);</p>
<p class="p1"><span class="Apple-converted-space">            </span>timerEl.textContent = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>recordStatus.textContent = 'Clique para gravar sua prece';</p>
<p class="p1"><span class="Apple-converted-space">            </span>recordIcon.className = 'fas fa-microphone text-4xl';</p>
<p class="p1"><span class="Apple-converted-space">            </span>recordButton.classList.remove('bg-gray-700', 'animate-pulse');</p>
<p class="p1"><span class="Apple-converted-space">            </span>recordButton.classList.add('bg-red-600');</p>
<p class="p1"><span class="Apple-converted-space">            </span>showView(recordView);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- Lógica de Gravação ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>async function startRecording() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const stream = await navigator.mediaDevices.getUserMedia({ audio: true });</p>
<p class="p1"><span class="Apple-converted-space">                </span>isRecording = true;</p>
<p class="p1"><span class="Apple-converted-space">                </span>audioChunks = [];</p>
<p class="p1"><span class="Apple-converted-space">                </span>mediaRecorder = new MediaRecorder(stream);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>mediaRecorder.ondataavailable = event =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audioChunks.push(event.data);</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>mediaRecorder.onstop = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audioBlob = new Blob(audioChunks, { type: 'audio/webm' });</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const audioUrl = URL.createObjectURL(audioBlob);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audioPlayback.src = audioUrl;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>showView(reviewView);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>stream.getTracks().forEach(track =&gt; track.stop());</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>mediaRecorder.start();</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateRecordingUI();</p>
<p class="p1"><span class="Apple-converted-space">                </span>startTimer();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (err) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Erro ao acessar microfone:", err);</p>
<p class="p1"><span class="Apple-converted-space">                </span>showView(permissionErrorView);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function stopRecording() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (mediaRecorder &amp;&amp; mediaRecorder.state === "recording") {</p>
<p class="p1"><span class="Apple-converted-space">                </span>mediaRecorder.stop();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>isRecording = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateRecordingUI();</p>
<p class="p1"><span class="Apple-converted-space">            </span>clearInterval(timerInterval);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function toggleRecording() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (isRecording) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>stopRecording();</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>startRecording();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- UI Updates ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateRecordingUI() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (isRecording) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordStatus.textContent = "Gravando... Clique para parar";</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordIcon.className = 'fas fa-stop text-4xl';</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordButton.classList.remove('bg-red-600');</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordButton.classList.add('bg-gray-700', 'animate-pulse');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordStatus.textContent = 'Processando...';</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordButton.classList.remove('bg-gray-700', 'animate-pulse');</p>
<p class="p1"><span class="Apple-converted-space">                </span>recordButton.classList.add('bg-red-600');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function startTimer() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let seconds = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>timerEl.textContent = '00:00';</p>
<p class="p1"><span class="Apple-converted-space">            </span>timerInterval = setInterval(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>seconds++;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mins = String(Math.floor(seconds / 60)).padStart(2, '0');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const secs = String(seconds % 60).padStart(2, '0');</p>
<p class="p1"><span class="Apple-converted-space">                </span>timerEl.textContent = `${mins}:${secs}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, 1000);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- Event Listeners ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>recordButton.addEventListener('click', toggleRecording);</p>
<p class="p1"><span class="Apple-converted-space">        </span>rerecordButton.addEventListener('click', resetToHome);</p>
<p class="p1"><span class="Apple-converted-space">        </span>homeButton.addEventListener('click', resetToHome);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>sendButton.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// ---------- PASSO 2: UPLOAD PARA O FIREBASE ----------</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Verifique se o áudio foi gravado</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!audioBlob) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>alert("Nenhuma gravação encontrada!");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Descomente o código abaixo após configurar o Firebase</p>
<p class="p1"><span class="Apple-converted-space">            </span>/*</p>
<p class="p1"><span class="Apple-converted-space">            </span>uploadStatus.textContent = 'Enviando sua prece...';</p>
<p class="p1"><span class="Apple-converted-space">            </span>sendButton.disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>rerecordButton.disabled = true;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const uniqueFileName = `prece-${new Date().getTime()}.webm`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const storageRef = ref(storage, `preces/${uniqueFileName}`);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>uploadBytes(storageRef, audioBlob).then((snapshot) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.log('Uploaded a blob or file!');</p>
<p class="p1"><span class="Apple-converted-space">                </span>uploadStatus.textContent = 'Prece enviada com sucesso!';</p>
<p class="p1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>showView(paymentView);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>uploadStatus.textContent = '';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>sendButton.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>rerecordButton.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, 2000);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}).catch((error) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Erro no upload: ", error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>uploadStatus.textContent = 'Erro ao enviar. Tente novamente.';</p>
<p class="p1"><span class="Apple-converted-space">                </span>sendButton.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                </span>rerecordButton.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>*/</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Simulação (REMOVA ou COMENTE esta parte após configurar o Firebase)</p>
<p class="p1"><span class="Apple-converted-space">            </span>uploadStatus.textContent = 'Preparando para pagamento...';</p>
<p class="p1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>uploadStatus.textContent = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>showView(paymentView);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, 1500);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>payButton.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Em um app real, aqui você processaria o pagamento</p>
<p class="p1"><span class="Apple-converted-space">            </span>// e, se bem-sucedido, atualizaria o status no Firestore.</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Simulação de sucesso</p>
<p class="p1"><span class="Apple-converted-space">            </span>showView(thankyouView);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Iniciar na tela de gravação</p>
<p class="p1"><span class="Apple-converted-space">        </span>resetToHome();</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
